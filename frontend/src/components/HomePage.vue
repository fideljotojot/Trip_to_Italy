<script>
/* Amalfi */
import faraglioniImg from '@/assets/images/Italy/amalfi coast and campania/faraglioni.jpg'
import marinaImg from '@/assets/images/Italy/amalfi coast and campania/Marina di Camerota.jpg'
import fiordoImg1 from '@/assets/images/Italy/amalfi coast and campania/Fiordo/fiordo di Furore.webp'
import fiordoImg2 from '@/assets/images/Italy/amalfi coast and campania/Fiordo/fiordo di Furore2.webp'
import fiordoImg3 from '@/assets/images/Italy/amalfi coast and campania/Fiordo/fiordo di Furore3.jpg'

/* Calabria */
import tropeaCapoVaticanoImg from '@/assets/images/Italy/calabria/Capo-Vaticano-Tropea-Italy-1024x767.jpg'
import tropeaSantaMariaImg from '@/assets/images/Italy/calabria/Santa-Maria-dellIsola-Tropea-Italy-1024x783.jpeg'
import tropeaThingsToDoImg from '@/assets/images/Italy/calabria/Things-to-Do-in-Tropea-Italy-814x1024.jpeg'
import tropeaItalyImg from '@/assets/images/Italy/calabria/Tropea-Italy-1-1024x683.jpg'
import tropeaOldTownImg from '@/assets/images/Italy/calabria/Tropea-Italy-Old-Town-1024x768.jpeg'
import tropeaImg from '@/assets/images/Italy/calabria/Tropea.jpg'
import tropeaImg1 from '@/assets/images/Italy/calabria/Tropea1.jpg'
import tropeaImg2 from '@/assets/images/Italy/calabria/Tropea2.jpg'
import tropeaImg5 from '@/assets/images/Italy/calabria/Tropea5.jpg'
import viboValentiaImg from '@/assets/images/Italy/calabria/Vibo-Valentia.jpg'

/* Liguria */
import monterossoBeachImg from '@/assets/images/Italy/liguria/monterosso/Monterosso beach.jpg'
import monterossoSunsetImg from '@/assets/images/Italy/liguria/monterosso/Monterosso-Al-Mare.jpg'
import CinqueTerreImg from '@/assets/images/Italy/liguria/Cinque-Terre-La-Spezia-Province.webp'
import baiaSunset from '@/assets/images/Italy/liguria/Bia/Baia_del_silenzio_.jpg'
import baiaFront from '@/assets/images/Italy/liguria/Bia/baia.jpeg'

/* Puglia */
import puntaProscuttoImg from '@/assets/images/Italy/puglia/Punta Prosciutto.jpg'
import puntaProscuttoImg1 from '@/assets/images/Italy/puglia/Punta Prosciutto.webp'
import puntaProscuttoImg2 from '@/assets/images/Italy/puglia/Punta Prosciutto (Porto Cesareo), lecce.webp'
import puntaProscuttoImg3 from '@/assets/images/Italy/puglia/Punta Prosciutto (Porto Cesareo).jpg'
import toreSantAndreaImg from '@/assets/images/Italy/puglia/Torre-Sant-Andrea-near-Melendugno-Lecce-district-Apulia-Italy.jpg'

/* Sardania */
import calaGoloritzèImg from '@/assets/images/Italy/sardinia/Cala Goloritzè (Baunei), Ogliastra.jpg'
import calaGoloritzèImg2 from '@/assets/images/Italy/sardinia/Cala Goloritzè (Baunei).jpg'
import calaGoloritzèImg3 from '@/assets/images/Italy/sardinia/Cala Goloritzè 1.jpg'
import calaGoloritzèImg4 from '@/assets/images/Italy/sardinia/Cala Goloritzè.jpg'
import calaLunaImg from '@/assets/images/Italy/sardinia/Cala Luna (Golfo di Orosei), Nuoro.webp'
import calaLunaImg1 from '@/assets/images/Italy/sardinia/Cala-Luna.jpg'
import calaLunaImg2 from '@/assets/images/Italy/sardinia/cala-luna-pixa-sardinia.jpg'
import calaLunaImg3 from '@/assets/images/Italy/sardinia/near-cala-luna-flickr-vasile-cotovanu.jpg'

import calaMarioluImg1 from '@/assets/images/Italy/sardinia/calamariolu.jpg'
import calaMarioluImg2 from '@/assets/images/Italy/sardinia/calamariolu1.jpg'
import calaMarioluImg3 from '@/assets/images/Italy/sardinia/calamariolu2.jpg'
import calaMarioluImg4 from '@/assets/images/Italy/sardinia/calamariolu3.jpg'
import calaMarioluImg5 from '@/assets/images/Italy/sardinia/calamariolu4.jpg'
import calaMarioluImg6 from '@/assets/images/Italy/sardinia/calamariolu5.jpg'
import calaMarioluImg7 from '@/assets/images/Italy/sardinia/calamariolu6.jpg'

import isAruttasImg1 from '@/assets/images/Italy/sardinia/Is Aruttas.jpg'
import isAruttasImg2 from '@/assets/images/Italy/sardinia/Is Aruttas1.jpg'
import isAruttasImg3 from '@/assets/images/Italy/sardinia/Is Aruttas2.jpg'
import isAruttasImg4 from '@/assets/images/Italy/sardinia/Is Aruttas3.jpg'
import isAruttasImg5 from '@/assets/images/Italy/sardinia/Is Aruttas4.jpg'

import laPelosaImg1 from '@/assets/images/Italy/sardinia/La Pelosa.webp'
import laPelosaImg2 from '@/assets/images/Italy/sardinia/La-Pelosa-tower-in-Stintino-Sardinia-Italy.webp'
import laPelosaImg3 from '@/assets/images/Italy/sardinia/Fantastic-blooming-flowers-on-Famous-La-Pelosa-beach-with-Torre-della-Pelosa.webp'
import laPelosaImg4 from '@/assets/images/Italy/sardinia/Stintino-La-Pelosa-beach.webp'

import portoGiuncoImg1 from '@/assets/images/Italy/sardinia/Porto Giunco.jpg'
import portoGiuncoImg2 from '@/assets/images/Italy/sardinia/Porto Giunco1.jpg'
import portoGiuncoImg3 from '@/assets/images/Italy/sardinia/Porto Giunco2.jpg'
import portoGiuncoImg4 from '@/assets/images/Italy/sardinia/Porto Giunco3.jpg'

import suGiudeuImg1 from '@/assets/images/Italy/sardinia/Su Giudeu.jpg'
import suGiudeuImg2 from '@/assets/images/Italy/sardinia/Su Giudeu1.jpg'
import suGiudeuImg3 from '@/assets/images/Italy/sardinia/Su Giudeu2.jpg'
import suGiudeuImg4 from '@/assets/images/Italy/sardinia/Su Giudeu3.jpg'
import suGiudeuImg5 from '@/assets/images/Italy/sardinia/Su Giudeu4.jpg'


/* Sicily */
import calaRossaImg from '@/assets/images/Italy/sicilia/italy-sicily-cala-rossa-beach-orig.jpg'
import calaRossaImg1 from '@/assets/images/Italy/sicilia/italy-sicily-cala-rossa-beach-aerial-view-orig.jpg'
import calaRossaImg2 from '@/assets/images/Italy/sicilia/italy-sicily-cala-rossa-beach-caves-orig.jpg'
import calaRossaImg3 from '@/assets/images/Italy/sicilia/italy-sicily-cala-rossa-beach-cliffs-orig.jpg'
import calaRossaImg4 from '@/assets/images/Italy/sicilia/italy-sicily-cala-rossa-beach-pathway-orig.jpg'
import calaRossaImg5 from '@/assets/images/Italy/sicilia/italy-sicily-cala-rossa-beach-stones-orig.jpg'
import calaRossaImg6 from '@/assets/images/Italy/sicilia/italy-sicily-cala-rossa-beach-view-from-water-orig.jpg'
import calaRossaImg7 from '@/assets/images/Italy/sicilia/italy-sicily-cala-rossa-beach-water-edge-orig.jpg'
import calaRossaImg8 from '@/assets/images/Italy/sicilia/italy-sicily-favignana-cala-rossa-beach-aerial-view-orig.jpg'
import calaRossaImg9 from '@/assets/images/Italy/sicilia/italy-sicily-favignana-cala-rossa-beach-orig.jpg'

import isolaBellaImg from '@/assets/images/Italy/sicilia/Isola Bella/Isola Bella.jpg'
import isolaBellaImg1 from '@/assets/images/Italy/sicilia/Isola Bella/Isola Bella1.jpg'
import isolaBellaImg2 from '@/assets/images/Italy/sicilia/Isola Bella/Isola Bella2.jpg'
import isolaBellaImg3 from '@/assets/images/Italy/sicilia/Isola Bella/Isola Bella3.jpg'
import isolaBellaImg4 from '@/assets/images/Italy/sicilia/Isola Bella/Isola-Bella-Maggiore.jpg'

import plemmirioImg from '@/assets/images/Italy/sicilia/Marina-Protetta-del-Plemmirio-Siracusa-_02.webp'
import scalaDeiTurchiImg from '@/assets/images/Italy/sicilia/Scala-dei-Turchi-Realmonte-Sicilia_01.webp'
import spiaggiaDeiConigliImg from '@/assets/images/Italy/sicilia/Spiaggia-dei-Conigli-Lampedusa.webp'
import sanVitoImg from '@/assets/images/Italy/sicilia/Spiaggia-di-San-Vito-San-Vito-lo-Capo-Trapani.webp'
import tonnarellaUzzoImg from '@/assets/images/Italy/sicilia/Tonnarella-dellUzzo-Riserva-dello-Zingaro-Trapani-Sicilia_01.webp'

/* Toscana */
import calaViolinaImg from '@/assets/images/Italy/toscana/Cala Violina, Scarlino – Toscana.webp'
import fenigliaImg from '@/assets/images/Italy/toscana/Spiaggia della Feniglia, Orbetello – Toscana.webp'
import arenellaImg from '@/assets/images/Italy/toscana/Spiaggia dell’Arenella, Isola del Giglio.webp'

export default {
    data() {
        return {
            user: 'BEATRIX',
            selectedPage: 'Italy',
            selectedRegion: 'Amalfi Coast',
            selectedBeach: 'Faraglioni',
            selectedImage: faraglioniImg,
            previousImage: null,
            currentImageIndex: 0,
            imageRotationInterval: null,
            regions: {
                'Italy': [
                    {
                        name: 'Amalfi Coast',
                        beaches: [
                            { name: 'Faraglioni', images: [faraglioniImg] },
                            { name: 'Marina di Camerota', images: [marinaImg] },
                            { name: 'Fiordo di Ferore' , images: [fiordoImg1,fiordoImg2,fiordoImg3]}
                        ]
                    },
                    {
                        name: 'Calabria',
                        beaches: [
                            { name: 'Tropea', images: [tropeaImg5, tropeaCapoVaticanoImg, tropeaSantaMariaImg, tropeaThingsToDoImg, tropeaItalyImg, tropeaOldTownImg, tropeaImg, tropeaImg1, tropeaImg2, viboValentiaImg] }
                        ]
                    },
                    {
                        name: 'Liguria',
                        beaches: [
                            { name: 'Monterosso', images: [monterossoBeachImg, monterossoSunsetImg] },
                            { name: 'Cinque Terre', images: [CinqueTerreImg] },
                            { name: 'Bia del Silezio', images: [baiaSunset, baiaFront]}
                        ]
                    },
                    {
                        name: 'Puglia',
                        beaches: [
                            { name: 'Punta Prosciutto', images: [puntaProscuttoImg, puntaProscuttoImg1, puntaProscuttoImg2, puntaProscuttoImg3] },
                            { name: 'Torre Sant\'Andrea', images: [toreSantAndreaImg] }
                        ]
                    },
                    {
                        name: 'Sardania',
                        beaches: [
                            { name: 'Cala Goloritzè', images: [calaGoloritzèImg, calaGoloritzèImg2, calaGoloritzèImg3, calaGoloritzèImg4] },
                            { name: 'Cala Luna', images: [calaLunaImg, calaLunaImg1, calaLunaImg2, calaLunaImg3] },
                            { name: 'Cala Mariolu', images: [ calaMarioluImg1, calaMarioluImg2, calaMarioluImg3, calaMarioluImg4, calaMarioluImg5, calaMarioluImg6, calaMarioluImg7] },
                            { name: 'Is Aruttas', images: [ isAruttasImg1, isAruttasImg2, isAruttasImg3, isAruttasImg4, isAruttasImg5] },
                            { name: 'La Pelosa', images: [ laPelosaImg1, laPelosaImg2, laPelosaImg3, laPelosaImg4] },
                            { name: 'Porto Giunco', images: [ portoGiuncoImg1, portoGiuncoImg2, portoGiuncoImg3, portoGiuncoImg4] },
                            { name: 'Su Giudeu', images: [ suGiudeuImg1, suGiudeuImg2, suGiudeuImg3, suGiudeuImg4, suGiudeuImg5] }
                        ]
                    },
                    {
                        name: 'Sicilia',
                        beaches: [
                            { name: 'Cala Rossa', images: [calaRossaImg, calaRossaImg1, calaRossaImg2, calaRossaImg3, calaRossaImg4, calaRossaImg5, calaRossaImg6, calaRossaImg7, calaRossaImg8, calaRossaImg9] },
                            { name: 'Isola Bella', images: [isolaBellaImg, isolaBellaImg1, isolaBellaImg2, isolaBellaImg3, isolaBellaImg4] },
                            { name: 'Plemmirio', images: [plemmirioImg] },
                            { name: 'Scala dei Turchi', images: [scalaDeiTurchiImg] },
                            { name: 'Spiaggia dei Conigli', images: [spiaggiaDeiConigliImg] },
                            { name: 'San Vito Lo Capo', images: [sanVitoImg] },
                            { name: 'Tonnarella dell\'Uzzo', images: [tonnarellaUzzoImg] }
                        ]
                    },
                    {
                        name: 'Toscana',
                        beaches: [
                            { name: 'Cala Violina', images: [calaViolinaImg] },
                            { name: 'Spiaggia della Feniglia', images: [fenigliaImg] },
                            { name: 'Spiaggia dell\'Arenella', images: [arenellaImg] }
                        ]
                    }
                ]
            }
        }
    },
    methods: {
        getRegions() {
            return this.regions[this.selectedPage] || [];
        },
        getBeaches() {
            if (!this.selectedRegion) return [];
            const region = this.getRegions().find(r => r.name === this.selectedRegion);
            return region ? region.beaches : [];
        },
        getImages() {
            if (!this.selectedBeach) return [];
            const beaches = this.getBeaches();
            const beach = beaches.find(b => b.name === this.selectedBeach);
            return beach ? beach.images : [];
        },
        startImageRotation() {
            const images = this.getImages();
            if (this.imageRotationInterval) {
                clearInterval(this.imageRotationInterval);
                this.imageRotationInterval = null;
            }

            if (images.length <= 1) return;

            this.imageRotationInterval = setInterval(() => {
                this.currentImageIndex = (this.currentImageIndex + 1) % images.length;
                this.previousImage = this.selectedImage;
                this.selectedImage = images[this.currentImageIndex];
            }, 3000);
        }
    },
    watch: {
        selectedBeach() {
            this.currentImageIndex = 0;
            const images = this.getImages();
            if (images.length > 0) {
                this.previousImage = this.selectedImage;
                this.selectedImage = images[0];
                this.startImageRotation();
            }
        }
    },
    mounted() {
        this.startImageRotation();
    },
    beforeUnmount() {
        if (this.imageRotationInterval) {
            clearInterval(this.imageRotationInterval);
        }
    }
}
</script>

<template>
    <main>
        <div class="background-image previous" v-if="previousImage" :style="{ backgroundImage: `url('${previousImage}')` }"></div>
        <div class="background-image current" :style="{ backgroundImage: this.selectedImage ? `url('${this.selectedImage}')` : 'none' }" :key="selectedImage"></div>
        <section class="sidebar">
            <header>
                <p>Welcome to Italy, dear</p> 
                <span>{{ user }}</span>
            </header>
            <ul>
                <li v-for="region in getRegions()" 
                :key="region.name" 
                @click="selectedRegion = region.name; 
                selectedBeach = region.beaches && region.beaches.length > 0 ? region.beaches[0].name : null; 
                selectedImage = region.beaches && region.beaches.length > 0 && region.beaches[0].images && region.beaches[0].images.length > 0 
                            ? region.beaches[0].images[0] : null;" 
                :class="{ active: selectedRegion === region.name,}">
                    {{ region.name }}
                </li>
            </ul>
        </section>

        <section class="content">
            <div class="beaches-list">
                <div v-for="(beach, index) in getBeaches()" 
                :key="beach.name" 
                class="beach-card"
                :class="{ active: selectedBeach === beach.name, 'many-beaches': getBeaches().length > 4, 'index-gt-4': index > 4  }" 
                @click="selectedBeach = beach.name; 
                selectedImage = beach.images && beach.images.length > 0 ? beach.images[0] : null;">
                    <p>{{ beach.name }}</p>
                </div>
            </div>
        </section>
    </main>
</template>

<style scoped>
main {
    width: 100%;
    height: 100vh;
    overflow: hidden;
    display: flex;
    position: relative;
}

.background-image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-size: cover;
    background-position: center;
    z-index: -1;
}

.background-image.previous {
    z-index: -2;
}

.background-image.current {
    z-index: -1;
    animation: fadeIn 0.5s ease-in-out;
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

.sidebar {
    width: clamp(200px, 15%, 400px);
    height: 100vh;
    background-color: rgba(10, 61, 97, 0.41);
    display: flex;
    flex-direction: column;
    gap: 2em;
    padding: 1em 0;
    color: #fff;
}

header {
    display: flex;
    flex-direction: column;
    font-family: 'Petrona', serif;
    font-size: 1.2em;
    padding: 0 1.3em;
    align-items: flex-start;
}

header span {
    font-family: 'Perpetua Titling MT', serif;
    font-weight: bold;
    font-size: 1.5em;
}
.sidebar ul {
    list-style: none;
    display: flex;
    flex-direction: column;
    text-align: center;
    padding: 0;
    gap: 4em;
    font-family: 'Libre Baskerville', serif;
}

.sidebar ul li {
    font-size: 1.25;
    cursor: pointer;
    padding: auto;
    border-radius: 4px;
    transition: background-color 0.3s ease;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.945);
}

.sidebar ul li.active {
    color: #FF6F61;
    border-left: 3px solid #ffddb6;
}

.sidebar ul li:hover:not(.active),
.beach-card:hover {
    color: #b6b9ff
}

.content {
    width: calc(100% - clamp(200px, 15%, 400px));
    height: 100vh;
    display: flex;
    justify-content: center;
}

.beaches-list {
    width:  calc(90% - clamp(200px, 15%, 400px));
    height: fit-content;
    position: absolute;
    bottom: 3%;
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: rgba(10, 61, 98, 0.3);
    padding: .2em;
}

.beach-card.active {
    color: #fff;
    font-size: 2em;
    font-family: 'Palatino Linotype', serif;
    font-weight: 900;
    -webkit-text-stroke: 0.5px #fff;
}

.beach-card {
    color: rgba(255, 111, 97, 1);
    font-family: 'Palanquin Dark', sans-serif;
    text-transform: uppercase;
    text-shadow: 1px 0px 1px rgba(0, 0, 0, 0.999);
    margin: 0 2em;
}

.many-beaches {
    font-size: .9em;
    margin: 0 .8em;
}

.many-beaches.active {
    margin: 0 .6em;
    font-size: 1.6em !important;
}
</style>